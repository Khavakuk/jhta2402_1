<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.desk8432.project">
    <select id="isFile" resultType="int" parameterType="UpdateImageUrlDTO" >
        SELECT count(*) FROM JHTA01_FILE WHERE USERNAME = #{username}
    </select>
    <insert id="insertFIle" parameterType="UpdateImageUrlDTO">
        INSERT INTO JHTA01_FILE values(
        FILE_SEQ.nextval,
        #{username},
        #{originalName},
        #{fileName},
        #{location},
        CURRENT_TIMESTAMP
        )
    </insert>
    <update id="updateFile" parameterType="UpdateImageUrlDTO">
        UPDATE JHTA01_File
        SET
        originalname = #{originalName},
        filename = #{fileName},
        location = #{location},
        created_at = CURRENT_TIMESTAMP
        WHERE username = #{username}
    </update>
</mapper>